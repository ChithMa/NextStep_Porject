{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/components/Register/Step4.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport React, { useContext, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { RegisterContext } from \"./RegisterContext\";\nimport axios from \"axios\";\nimport \"../../styles/form.css\";\n\nfunction Step4() {\n  const context = useContext(RegisterContext);\n  if (!context) throw new Error(\"Step4 must be used within RegisterProvider\");\n  \n  const { formData } = context;\n  const [profilePic, setProfilePic] = useState<File | null>(null);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const router = useRouter();\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    if (![\"image/jpeg\", \"image/png\"].includes(file.type)) {\n      setError(\"Only JPG or PNG images are allowed for profile picture\");\n      return;\n    }\n    if (file.size > 2 * 1024 * 1024) {\n      setError(\"Profile picture size must not exceed 2 MB\");\n      return;\n    }\n\n    setError(\"\");\n    setProfilePic(file);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!profilePic) {\n      setError(\"Please upload your profile picture\");\n      return;\n    }\n\n    try {\n      const data = new FormData();\n      data.append(\"studentID\", formData.studentID);\n      data.append(\"firstName\", formData.firstName);\n      data.append(\"lastName\", formData.lastName);\n      data.append(\"contactNumber\", formData.contactNumber);\n      data.append(\"degreeProgramme\", formData.degreeProgramme);\n      data.append(\"level\", formData.level);\n      data.append(\"email\", formData.email);\n      data.append(\"password\", formData.password);\n      data.append(\"availability\", formData.availability);\n      \n      // ✅ Append internship preferences properly\n      formData.internshipPreferences.forEach((pref) => {\n        data.append(\"internshipPreferences\", pref);\n      });\n      \n      if (formData.cv) {\n        data.append(\"cv\", formData.cv);\n      }\n      data.append(\"profilePic\", profilePic);\n\n      const res = await axios.post(\"http://localhost:5000/api/auth/register\", data, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setSuccess(\"Registration successful! Redirecting to login...\");\n      setTimeout(() => {\n        router.push(\"/\");\n      }, 2000);\n    } catch (err) {\n      console.error(err);\n      setError(\"Error during registration. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"form-container\">\n      <h2>Step 4 – Upload Profile Picture</h2>\n      <form onSubmit={handleSubmit}>\n        <input type=\"file\" accept=\".jpg,.jpeg,.png\" onChange={handleFileChange} />\n        {error && <p className=\"error\">{error}</p>}\n        {success && <p className=\"success\">{success}</p>}\n        <button type=\"submit\">Sign Up</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Step4;\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}